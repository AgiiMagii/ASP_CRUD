@model ASP_CRUD.Models.StudentModel
@using System.Web.Mvc
@using System.Linq
@using ASP_CRUD.Lib
@Styles.Render("~/Content/Modal.css")



@{

    var genderItems = new List<SelectListItem>
        {
            new SelectListItem { Value = "M", Text = "Male" },
            new SelectListItem { Value = "F", Text = "Female" }
        };

    Factory factory = new Factory();
    var courseItems = factory.GetAllCourses()
        .Select(c => new SelectListItem
        {
            Value = c.ID_course.ToString(),
            Text = c.Name,
        });

}

@using (Html.BeginForm())

{
    @Html.AntiForgeryToken()
    <div class="modal-overlay">
        <div class="modal-window">

            <div class="form-horizontal">
                <h4>Student Registration</h4>
                <hr />
                @Html.ValidationSummary(true, "", new { @class = "text-danger" })

                <div class="form-group">
                    @Html.LabelFor(model => model.Name, htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-10">
                        @Html.EditorFor(model => model.Name, new { htmlAttributes = new { @class = "form-control", autocomplete = "nope" } })
                        @Html.ValidationMessageFor(model => model.Name, "", new { @class = "text-danger" })
                    </div>
                </div>

                <div class="form-group">
                    @Html.LabelFor(model => model.Surname, htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-10">
                        @Html.EditorFor(model => model.Surname, new { htmlAttributes = new { @class = "form-control", autocomplete = "nope" } })
                        @Html.ValidationMessageFor(model => model.Surname, "", new { @class = "text-danger" })
                    </div>
                </div>


                <div class="form-group">
                    @Html.LabelFor(model => model.Gender, htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-10">
                        @Html.DropDownListFor(model => model.Gender, genderItems, "Select Gender", new { @class = "form-control" })
                        @Html.ValidationMessageFor(model => model.Gender, "", new { @class = "text-danger" })
                    </div>
                </div>

                <div class="form-group">
                    @Html.Label("BirthYear", "Birth Date", htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-10">

                        <div class="form-inline">

                            @Html.DropDownList("BirthYear_Year",
                                Enumerable.Range(DateTime.Now.Year - 100, 101)
                                    .Reverse()
                                    .Select(y => new SelectListItem { Value = y.ToString(), Text = y.ToString() }),
                                "Year",
                                new { @class = "form-control", style = "width: 90px; margin-right:5px;" })

                            @Html.DropDownList("BirthYear_Month",
                                Enumerable.Range(1, 12)
                                    .Select(m => new SelectListItem { Value = m.ToString("00"), Text = m.ToString("00") }),
                                "Month",
                                new { @class = "form-control", style = "width: 90px; margin-right:5px;" })

                            @Html.DropDownList("BirthYear_Day",
                                Enumerable.Range(1, 31)
                                    .Select(d => new SelectListItem { Value = d.ToString("00"), Text = d.ToString("00") }),
                                "Day",
                                new { @class = "form-control", style = "width: 90px;" })
                        </div>

                        @Html.ValidationMessageFor(model => model.BirthYear, "", new { @class = "text-danger" })
                    </div>
                </div>


                <div class="form-group">
                    @Html.LabelFor(model => model.Course, htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-10">
                        @Html.DropDownListFor(model => model.Course, courseItems, "Select Course", new { @class = "form-control" })
                        @Html.ValidationMessageFor(model => model.Course, "", new { @class = "text-danger" })
                    </div>
                </div>

                <div class="form-group modal-buttons">
                    <input type="submit" value="Create" class="btn btn-primary" />
                    @Html.ActionLink("Back to List", "Students")
                </div>
            </div>


        </div>
    </div>
}

